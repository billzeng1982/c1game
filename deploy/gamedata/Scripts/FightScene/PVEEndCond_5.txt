--[[
名称：活动关卡使用
返回值：是否结束，胜利方，结束原因
描述：
1、均返回我方胜利
--]]

local function checkPVEEndCond(LuaFightController)
	--判断是否结束
	local bIsEnd = false;
	local eWiner = PLAYER_GROUP.PLAYER_GROUP_NONE;
	local eReason = FIGHTSETTLE_REASON.FIGHTSETTLE_NONE;
	local iSelfHP = LuaFightController:GetCityHpSelf();
	local iEnemyHP = LuaFightController:GetCityHpEnemy();
	local iLeftTime = LuaFightController:GetCurFightTime();
	local iIsSelfDeadAll = LuaFightController:IsSelfDeadAll();
	local iIsRoundFail = LuaFightController:IsRoundFail();
	local iIsRoundOver = LuaFightController:IsRoundOver();
	
	--判断胜负方，策划可以修改
	if iSelfHP <= 0 then
		bIsEnd = true;
		eWiner = PLAYER_GROUP.PLAYER_GROUP_DOWN;
		eReason = FIGHTSETTLE_REASON.FIGHTSETTLE_ROUNDFAIL;
		
	elseif iEnemyHP <= 0 then
		bIsEnd = true;
		eWiner = PLAYER_GROUP.PLAYER_GROUP_DOWN;
		eReason = FIGHTSETTLE_REASON.FIGHTSETTLE_ROUNDFAIL;
		
	elseif iIsSelfDeadAll == true then
		bIsEnd = true;
		eWiner = PLAYER_GROUP.PLAYER_GROUP_DOWN;
		eReason = FIGHTSETTLE_REASON.FIGHTSETTLE_ROUNDFAIL;
		
	elseif iIsRoundFail == true then
		bIsEnd = true;
		eWiner = PLAYER_GROUP.PLAYER_GROUP_DOWN;
		eReason = FIGHTSETTLE_REASON.FIGHTSETTLE_ROUNDFAIL;
		
	elseif iIsRoundOver == true then
		bIsEnd = true;
		eWiner = PLAYER_GROUP.PLAYER_GROUP_DOWN;
		eReason = FIGHTSETTLE_REASON.FIGHTSETTLE_ROUNDOVER;
		
	elseif iLeftTime <= 0 then
		bIsEnd = true;
		eWiner = PLAYER_GROUP.PLAYER_GROUP_DOWN;
		eReason = FIGHTSETTLE_REASON.FIGHTSETTLE_ROUNDFAIL;
		
	end
	
	return bIsEnd, eWiner, eReason;
end

PVEEndCond_5 = {
	func_PVEEndCond = checkPVEEndCond;
}