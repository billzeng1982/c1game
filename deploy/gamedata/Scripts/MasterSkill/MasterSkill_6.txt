--[[
名称：固守之阵
类型：军师技能
描述：减少我方城墙受到的伤害，增加我方攻城伤害
--]]
local ThisScriptId = 6;

--技能诞生处理
local function runBorn(LuaDataAgt)
	LuaDataAgt:SetFormula(VALUE_CHG_TYPE.CHG_HP_MASTERSKILL, ThisScriptId, 0);
end

--技能条件判断
local function checkCond(LuaDataAgt)
	return true;
end

--找对象，上面条件满足后执行
local function findTarget(LuaDataAgt)
	LuaDataAgt:ClearTarget();
    local targetList1 = LuaDataAgt:FindTargetCity(TARGET_GROUP.SELF);
	local targetList2 = LuaDataAgt:FindTarget(TARGET_GROUP.SELF);
end

--技能生效
local function takeEffect(LuaDataAgt)
	local target = LuaDataAgt:GetTargetCity(TARGET_GROUP.SELF);
	target:AddBuff(1060, LuaDataAgt, nil);
	
	--我方加攻城伤害
	local targeList2 = LuaDataAgt:GetTargetList(TARGET_GROUP.SELF);
	for i=0 , targeList2.Count - 1 do
		local iTarget = targeList2:get_Item(i);
		iTarget:AddBuff(1061, LuaDataAgt, nil);
	end
end

--技能生效完成
local function takeEffectDone(LuaDataAgt)
	
end

local function doFormula(LuaDataAgt, iFormulaType, iFormulaPara, rSource, rTarget, iDamageRef)
	iRet = 3000;
	return iRet;
end

MasterSkill_6 = {
	func_runBorn = runBorn;
	func_checkCond = checkCond;
	func_findTarget = findTarget;
	func_takeEffect = takeEffect;
	func_takeEffectDone = takeEffectDone;
	func_doFormula = doFormula;
}