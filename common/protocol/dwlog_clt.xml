<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<metalib tagsetversion="1" name="DWLOG" version="1" >

	<!--
	data warehouse log, 公司内部数据仓库日志, 由client打包发过来记录入库日志的描述结构
	注意:
	infobright 不支持: UNSIGNED !!
-->
	<include file="dwlog_def.xml"/>

	<macrosgroup name="CLT_DWLOG_GROUP" >
		<macro name="CLT_FIGHT_STATS"		value="1001"	desc="客户端战场统计日志"/>
		<macro name="CLT_FIGHT_STATS_PVE"	value="1002"	desc="客户端战场统计日志PVE"/>
	</macrosgroup>

	<struct name="CltFightStats" version="1" desc="客户端战场统计日志单条数据">
		<entry name="DateTime" 				type="string"   desc="日期时间"		size="MAX_TIMEINFO_LENGTH"/>
		<entry name="DungeonID" 			type="int" 		desc="副本ID"/>
		<entry name="PlayerName" 			type="string"	desc="玩家名字"		size="MAX_NAME_LENGTH"/>
    	<entry name="MasterSkillID" 		type="int" 		desc="军师技能ID"/>
    	<entry name="MasterSkillUsedTimes" 	type="int" 		desc="军师技本场使用次数"/>
		<entry name="GeneralID" 			type="int" 		desc="武将ID"/>
		<entry name="GeneralName" 			type="string"	desc="武将名字"		size="MAX_NAME_LENGTH"/>
		<entry name="RepelTimes" 			type="int" 		desc="击退敌人数"/>
		<entry name="DeadWithdrawTimes" 	type="int" 		desc="死亡回城数"/>
		<entry name="ActiveWithdrawTimes" 	type="int" 		desc="主动回城数"/>
		<entry name="CastSkillTimes" 		type="int" 		desc="技能释放次数"/>
		<entry name="SkillHitNum" 			type="int" 		desc="技能命中目标数"/>
		<entry name="TotalHealIn" 			type="int" 		desc="承受总恢复"/>
		<entry name="SkillHealIn" 			type="int" 		desc="承受技能恢复"/>
		<entry name="BuffHealIn" 			type="int" 		desc="承受Buff恢复"/>
		<entry name="TotalHealOut" 			type="int" 		desc="输出总恢复"/>
		<entry name="SkillHealOut" 			type="int" 		desc="输出技能恢复"/>
		<entry name="BuffHealOut" 			type="int" 		desc="输出Buff恢复"/>
		<entry name="TotalDamageIn" 		type="int" 		desc="承受总伤害"/>
		<entry name="NomarlAtkDamageIn" 	type="int" 		desc="承受白兵伤害"/>
		<entry name="SpearAtkDamageIn" 		type="int" 		desc="承受枪击伤害"/>
		<entry name="ShootAtkDamageIn" 		type="int" 		desc="承受射击伤害"/>
		<entry name="RushAtkDamageIn" 		type="int" 		desc="承受突击伤害"/>
		<entry name="FaceAtkDamageIn" 		type="int" 		desc="承受迎击伤害"/>
		<entry name="SkillAtkDamageIn" 		type="int" 		desc="承受技能伤害"/>
		<entry name="BuffDamageIn" 			type="int" 		desc="承受Buff伤害"/>
		<entry name="AtkCityDamageIn" 		type="int" 		desc="承受攻城伤害"/>
		<entry name="AmbushAtkDamageIn" 	type="int" 		desc="承受伏兵伤害"/>
		<entry name="TotalDamageOut" 		type="int" 		desc="输出总伤害"/>
		<entry name="NomarlAtkDamageOut" 	type="int" 		desc="输出白兵伤害"/>
		<entry name="SpearAtkDamageOut" 	type="int" 		desc="输出枪击伤害"/>
		<entry name="ShootAtkDamageOut" 	type="int" 		desc="输出射击伤害"/>
		<entry name="RushAtkDamageOut" 		type="int" 		desc="输出突击伤害"/>
		<entry name="FaceAtkDamageOut" 		type="int" 		desc="输出迎击伤害"/>
		<entry name="SkillAtkDamageOut" 	type="int" 		desc="输出技能伤害"/>
		<entry name="BuffDamageOut" 		type="int" 		desc="输出Buff伤害"/>
		<entry name="AtkCityDamageOut" 		type="int" 		desc="输出攻城伤害"/>
		<entry name="AmbushAtkDamageOut" 	type="int" 		desc="输出伏兵伤害"/>
		<entry name="RecoveryInCity" 		type="int" 		desc="城内回血"/>
		<entry name="Winner"				type="string"	desc="胜利者"	size="MAX_NAME_LENGTH"/>
    	<entry name="GeneralStar"		type="int"		    desc="武将星级" />
   		<entry name="GeneralMaxHP"		type="int"		    desc="武将总血量" />
    	<entry name="GeneralStrength"		type="int"		    desc="武将物攻" />
    	<entry name="GeneralStrengthDef"		type="int"		    desc="武将物防" />
    	<entry name="GeneralWit"		type="int"		    desc="武将法攻" />
    	<entry name="GeneralWitDef"		type="int"		    desc="武将法防" />
    	<entry name="BaseDamageAtkNormal"		type="int"		    desc="基础白兵伤害" />
    	<entry name="BaseDamageAtkCity"		type="int"		    desc="基础攻城伤害" />
    	<entry name="ArmyBaseValue"		type="uint32"		    desc="兵种技基础值" />
    	<entry name="IsAutoBattle"		type="uint8"		    desc="是否是自动战斗" />
    	<entry name="MaxFramePerSecond"		type="int"		    desc="最大帧率" />
    	<entry name="MinFramePerSecond"		type="int"		    desc="最小帧率" />
    	<entry name="AverageFramePerSecond"		type="int"		    desc="平均帧率" />
  </struct>

	<struct name="CltFightStatsPVE"  version="1"  desc="客户端PVE战场统计日志单条数据">
		<entry name="PlayerID" 			type="uint64" 		desc="玩家ID"/>
		<entry name="PlayerName"		type="string" 		desc="玩家名字"		size="MAX_NAME_LENGTH"/>
		<entry name="PlayerLevel"		type="uint32" 		desc="玩家等级"/>
		<entry name="FLevelID" 			type="uint32" 		desc="关卡ID"/>
		<entry name="FLevelType"		type="int8"			desc="关卡类型"/>
		<entry name="FLevelHardType"	type="int8"			desc="关卡难度类型"/>
		<entry name="IsPass"			type="uint8"		desc="是否通关"/>
		<entry name="PassReason"		type="int8"			desc="通关原因"/>
		<entry name="TimeStart"			type="string" 		desc="开始时间"		size="MAX_TIMEINFO_LENGTH"/>
		<entry name="TimeFinish"		type="string" 		desc="结束时间"		size="MAX_TIMEINFO_LENGTH"/>
		<entry name="StarEvalResult"	type="uint8" 		desc="评星结果"/>
		<entry name="StarEvalIDCount"	type="uint8" 		desc="完成的评星ID个数"/>
		<entry name="StarEvalIDList"	type="uint32" 		desc="完成的评星ID链表"	count="MAX_PVE_STAR_COND" refer="StarEvalIDCount"/>
		<entry name="FallPropsCount"	type="int8" 		desc="掉落物品个数"	/>
		<entry name="FallPropsList"		type="uint32"		desc="掉落物品ID链表"		count="MAX_PVE_FALL" refer="FallPropsCount"/>
		<entry name="FallPropsNumList"	type="uint8"		desc="掉落物品数量链表"	count="MAX_PVE_FALL" refer="FallPropsCount"/>
		<entry name="KillTroopNum"		type="uint8"		desc="部队总击杀数"/>
		<entry name="KillTowerNum"		type="uint8"		desc="撞毁栅栏数"/>
		<entry name="KillBarrierNum"	type="uint8"		desc="撞毁箭塔数"/>
		<entry name="DeadTroopNum"		type="uint8"		desc="部队总死亡数"/>
		<entry name="GSkillUseNum"		type="uint8"		desc="武将技能使用数"/>
		<entry name="MSkillUseNum"		type="uint8"		desc="武将技能使用数"/>
		<entry name="CityHpSelf"		type="uint8"		desc="己方剩余血量"/>
		<entry name="CityHpEnemy"		type="uint8"		desc="敌方剩余血量"/>
		<entry name="DamageOut"			type="uint32"		desc="总伤害输出量（不含攻城）"/>
		<entry name="DamageIn"			type="uint32"		desc="总伤害承受量（不含被攻城）"/>
	</struct>

	<struct name="CltFightStatsArray"  version="1"  desc="客户端战场统计日志数组">
		<entry name="CltFightStatsCNT"		type="uint8"		    desc="战斗日志条数" />
		<entry name="CltFightStatsList"		type="CltFightStats"   	desc="战斗日志列表" 	count="MAX_STATS_NUM"   refer="CltFightStatsCNT" />
	</struct>



</metalib>

